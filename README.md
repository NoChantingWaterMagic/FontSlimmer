# FontSlimmer
## TTF字体子集化工具

### 目录
- [项目特点](#特点)
- [开始之前](#开始之前)
- [项目内容](#本项目包含两个内容)
- [背景和实用性](#背景)
- [未来改进](#以后还会改进的)
- [实际使用场景](#附实际使用场景)

### 特点：
1. **非常简单好上手，有图形界面**。哥们文科生被逼急了才搞这个，我能用会你们也一定能用会。readme一大堆实际用起来pycharm里右键运行没了。
2. **非常自由**，我用其它工具的时候有些非要你把所有的字体全部找齐才可以启动子集化，有些字体就用个几个字或者非常难找真是把哥们急死了。所以这个工具你爱对哪几个字体进行操作就对哪几个操作。

### 开始之前：
你需要能运行python的环境，并且安装好需要的运行库：
- `tkinter`
- `os`
- `fontTools`

### 本项目包含两个内容：
- **ASSInfoShow**：**负责批量获取汇总 `.ass` 文件中提到的所有字体和字符信息**，并且输出一个 `.txt` 文件包含上述两部分内容。
- **FontSlimmer**：负责读取所有TTF格式的字体，再加载并读取 `ASSInfoShow` 生成的 `.txt` 文件，**最后根据txt文件中包含的字符对字体进行最优子集化**。

完成后再用 `MKVToolNix` 之类的工具把子集化后的字体缝进视频即可。

今天先上传 `ASSInfoShow`，右键运行即可。点击加载 `ASS` 文件选择字幕文件，点击导出可以在指定的路径生成一个 `.txt` 的信息汇总。后面会用到的。

### 背景：
我认为**好看合适的字体也是观影体验的一部分**。本人看动画片/影视剧的习惯是先下载下来，然后用 `infuse`、`jellyfin`、`emby` 之类的在线媒体库进行观看。而这些媒体库软件大多数都是无法加载外部字体的，所以我们需要 `MKVToolsNix` 自己手动把字体文件缝合进去。但是字体提供商提供的完整版字体通常包含了太多的字型，可能一集视频光字幕都有好几百MB的体积。这无论是对加载速度还是小水管的传输速度都是极大的挑战，实测下来30mbps的小水管加载个上百兆的字幕需要好几分钟还很容易弹失败，真是**非常糟糕的体验**。为了解决这个问题所以有了本项目。

### 以后还会改进的：
**FontName和FontFamily都提前存起来后面写回了，不会遇到一些工具子集化操作之后infuse和emby调用不了的情况。希望能帮到爱看动画片和其他影视剧的你！**

#### 附：实际使用场景
![R13M0({~I@Q(G 4EZ(`V~3V](https://github.com/NoChantingWaterMagic/FontSlimmer/assets/120241623/b28829c7-1c86-4ba9-bdee-6ba870ac17a8)

![4LICJ 2K_%YS73D9ZV0N {X](https://github.com/NoChantingWaterMagic/FontSlimmer/assets/120241623/8e638f52-6342-4521-bb39-adc78792bef8)

![QQ截图20240407221439](https://github.com/NoChantingWaterMagic/FontSlimmer/assets/120241623/5c38367f-c291-451f-bffa-d2b7a532a9d0)
